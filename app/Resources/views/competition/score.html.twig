{% extends 'base.html.twig' %}
{% import ':macro:display.html.twig' as display %}

{% block title %}
    {{ session.competition.name }} - {{ session.startTime | date(DATETIME_FORMAT) }}
{% endblock %}

{% block body %}
    <div id="scoring_app"></div>
{% endblock %}

{% block javascripts %}
    {{ parent() }}

    <script src="{{ socketio_url }}/socket.io/socket.io.js"></script>
    <script src="{{ asset('js/scoring.js') }}"></script>
    <script>
        'use strict';

        (function (competition) {
            var rounds = {{ rounds|json_encode|raw }};
            var targets = [];

            targets[1] = [];
            targets[1][1] = 2;
            targets[1][2] = null;
            targets[1][3] = 2;
            targets[1][4] = 2;

            m.module($("#scoring_app")[0], {
                controller: function() {
                    return new competition.controller({rounds: rounds, targets: targets});
                },
                view: competition.view
            });
        })(window['orbital']['competition']);
    </script>

{% endblock %}
